{"version":3,"sources":["forms.js"],"names":["document","addEventListener","setRequiredFieldBackgroundColor","field","color","getComputedStyle","body","getPropertyValue","value","style","backgroundColor","querySelectorAll","forEach","event","target","textarea","setAttribute","height","HTMLTextAreaElement","prototype","counter","this","maxLength","textLength","id","counterId","getElementById","createElement","innerHTML","parentNode","insertBefore","nextSibling","console","log"],"mappings":"AAiBAA,SAASC,iBAAiB,mBAAoB,WAC5C,SAASC,EAAgCC,GAEvCC,MAAQC,iBAAiBL,SAASM,MAAMC,iBAAiB,sCACtC,IAAfJ,EAAMK,QACRJ,MAAQC,iBAAiBL,SAASM,MAAMC,iBAAiB,sCAE3DJ,EAAMM,MAAMC,gBAAiBN,MAE/BJ,SAASW,iBAAiB,cAAcC,QAAQT,IAE9CD,EAAgCC,GAEhCA,EAAMF,iBAAiB,SAAWY,IAEhCX,EAAgCW,EAAMC,cAIzC,GAWHd,SAASW,iBAAiB,6BAA6BC,QAASG,IAC9DA,EAASC,aAAa,QAAS,UAAaD,EAAqB,aAAI,yBACrEA,EAASd,iBAAiB,QAAUY,IAClCA,EAAMC,OAAOL,MAAMQ,OAAS,OAC5BJ,EAAMC,OAAOL,MAAMQ,OAAUJ,EAAMC,OAAmB,aAAI,OAAQ,KAOtEI,oBAAoBC,UAAUC,QAAU,WACtC,OAAOC,KAAKC,UAAYD,KAAKE,YAG/BvB,SAASW,iBAAiB,0BAA0BC,QAASG,IAC3D,GAAmB,IAAfA,EAASS,GACX,KAAM,yFAER,IAAIC,EAAYV,EAASS,GAAK,WAE9B,IAAKxB,SAAS0B,eAAeD,GAAY,CACvC,IAAIL,EAAUpB,SAAS2B,cAAc,SACrCP,EAAQQ,UAAYb,EAASK,UAAY,mBACzCA,EAAQI,GAAKC,EACbV,EAASc,WAAWC,aAAaV,EAASL,EAASgB,aAErDhB,EAASd,iBAAiB,QAAUY,IAClCmB,QAAQC,IAAIR,GACZzB,SAAS0B,eAAeD,GAAWG,UAAYf,EAAMC,OAAOM,UAAY,qBACvE","sourcesContent":["//Mandatory fields\n\n/**\n * Set background color for input, selects and textareas.\n *\n * Requires two color CSS variables to be defined\n * --empty-required-field-background\n * --filled-required-field-background\n *\n * https://developer.mozilla.org/en-US/docs/Web/CSS/var\n *\n * In UNICEF theme colors are defined in variables.scss\n *\n *\n * If the field is empty sets the empty\n */\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  function setRequiredFieldBackgroundColor(field) {\n    //console.log(getComputedStyle(document.body).getPropertyValue('--empty-required-field-background'));\n    color = getComputedStyle(document.body).getPropertyValue('--filled-required-field-background');\n    if (field.value == \"\") {\n      color = getComputedStyle(document.body).getPropertyValue('--empty-required-field-background');\n    }\n    field.style.backgroundColor= color;\n  }\n  document.querySelectorAll('[required]').forEach(field => {\n    //initialize color.\n    setRequiredFieldBackgroundColor(field);\n    //Add event listener\n    field.addEventListener('change', (event) => {\n      //console.log(e)\n      setRequiredFieldBackgroundColor(event.target)\n      //console.log(e.target.style.backgroundColor)\n    });\n  });\n}, false);\n\n\n\n/**\n  * Textarea autoresize\n  *\n  * Textareas with data-autoresize attribute defined growth in height when\n  * user enters text.\n  *\n**/\ndocument.querySelectorAll('textarea[data-autoresize]').forEach( textarea => {\n  textarea.setAttribute('style', 'height:' + (textarea.scrollHeight) + 'px;overflow-y:hidden;');\n  textarea.addEventListener(\"input\", (event) => {\n    event.target.style.height = 'auto';\n    event.target.style.height = (event.target.scrollHeight) + 'px';}, false);\n});\n\n\n/**\n * Textarea counter\n */\nHTMLTextAreaElement.prototype.counter = function() {\n  return this.maxLength - this.textLength;\n}\n\ndocument.querySelectorAll('textarea[data-counter]').forEach( textarea => {\n  if (textarea.id == \"\") {\n    throw \"In order to use data-counter on a textarea you need to set a unique id to the textarea\";\n  }\n  let counterId = textarea.id + \"-counter\";\n  //if counter is not in the HTML => add it to the DOM.\n  if (!document.getElementById(counterId)) {\n    let counter = document.createElement(\"small\")\n    counter.innerHTML = textarea.counter() + \" characters left\";\n    counter.id = counterId;\n    textarea.parentNode.insertBefore(counter, textarea.nextSibling);\n  }\n  textarea.addEventListener(\"input\", (event) => {\n    console.log(counterId);\n    document.getElementById(counterId).innerHTML = event.target.counter() + \" characters left\";\n  }, false);\n});\n"],"file":"unicef-min.js"}